<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理画面 | プロテイン管理ツール</title>
    <!-- ULTRATHINK CACHE BUST: 2025-10-20 17:00 -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: #111827;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 50%, #f0fdfa 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        /* ヘッダー */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 2rem;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: #111827;
            text-decoration: none;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #81c784 0%, #4fc3f7 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav {
            display: flex;
            gap: 1.5rem;
        }

        .nav a {
            color: #111827;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            transition: all 0.3s;
        }

        .nav a:hover, .nav a.active {
            background: rgba(129, 199, 132, 0.2);
            color: #2d5016;
        }

        /* 管理ダッシュボード */
        .admin-dashboard {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .admin-sidebar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 1.5rem;
            padding: 2rem;
            height: fit-content;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .admin-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .admin-nav li {
            margin-bottom: 0.5rem;
        }

        .admin-nav a {
            display: block;
            padding: 1rem;
            border-radius: 0.75rem;
            color: #4a5568;
            text-decoration: none;
            transition: all 0.3s;
            font-weight: 500;
        }

        .admin-nav a:hover, .admin-nav a.active {
            background: rgba(129, 199, 132, 0.2);
            color: #2d5016;
        }

        .admin-content {
            min-height: 600px;
        }

        .admin-tab {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 1.5rem;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .admin-tab.active {
            display: block;
        }

        .tab-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .tab-header h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
            color: #111827;
        }

        /* ボタン */
        .btn-primary, .btn-secondary, .btn-danger, .btn-small {
            padding: 0.875rem 1.75rem;
            border-radius: 1rem;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #81d4fa 0%, #64b5f6 100%);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #64b5f6 0%, #42a5f5 100%);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #a8e6cf 0%, #81c784 100%);
            color: white;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #81c784 0%, #66bb6a 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ffab91 0%, #ff8a65 100%);
            color: white;
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #ff8a65 0%, #ff7043 100%);
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
            background: rgba(129, 199, 132, 0.2);
            color: #2d5016;
        }

        /* フォーム要素 */
        .search-input, .filter-select, input, select, textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 0.75rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            color: #111827;
            font-weight: 500;
            transition: all 0.3s;
        }

        .search-input:focus, .filter-select:focus, input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #81d4fa;
            box-shadow: 0 0 0 3px rgba(129, 212, 250, 0.1);
        }

        /* フィルター */
        .admin-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        /* テーブル */
        .foods-table-container, .menus-table-container {
            overflow-x: auto;
            border-radius: 1rem;
            background: rgba(255, 255, 255, 0.95);
        }

        .foods-table, .menus-table {
            width: 100%;
            border-collapse: collapse;
        }

        .foods-table th, .foods-table td, .menus-table th, .menus-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .foods-table th, .menus-table th {
            background: rgba(129, 199, 132, 0.2);
            font-weight: 600;
            color: #111827;
        }

        /* グリッド */
        .categories-grid, .restaurants-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        /* レスポンシブ */
        @media (max-width: 768px) {
            .nav { display: none; }
            .admin-dashboard { grid-template-columns: 1fr; }
            .admin-sidebar { order: 2; }
        }
    </style>
</head>
<body>
    <!-- ヘッダー -->
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <div class="logo-icon">P</div>
                プロテイン管理ツール
            </a>
            <nav class="nav">
                <a href="index.html">ホーム</a>
                <a href="database.html">食材データベース</a>
                <a href="planner.html">プラン作成</a>
                <a href="recommended.html">おすすめ食材</a>
                <a href="restaurants.html">チェーン店メニュー</a>
                <a href="admin.html" class="active">管理画面</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="admin-dashboard">
            <!-- 管理メニュー -->
            <aside class="admin-sidebar">
                <nav class="admin-nav">
                    <ul>
                        <li><a href="#foods" class="nav-link active" data-tab="foods">食材管理</a></li>
                        <li><a href="#categories" class="nav-link" data-tab="categories">カテゴリー管理</a></li>
                        <li><a href="#restaurants" class="nav-link" data-tab="restaurants">レストラン管理</a></li>
                        <li><a href="#menus" class="nav-link" data-tab="menus">メニュー管理</a></li>
                        <li><a href="#import-export" class="nav-link" data-tab="import-export">インポート/エクスポート</a></li>
                        <li><a href="#settings" class="nav-link" data-tab="settings">設定</a></li>
                    </ul>
                </nav>
            </aside>

            <!-- メインコンテンツ -->
            <main class="admin-content">
                <!-- 食材管理タブ -->
                <section id="tab-foods" class="admin-tab active">
                    <div class="tab-header">
                        <h2>食材管理</h2>
                        <button class="btn-primary" onclick="showAddFoodModal()">
                            新しい食材を追加
                        </button>
                    </div>

                    <div class="admin-filters">
                        <input type="text" id="searchFoods" placeholder="食材名で検索..." class="search-input">
                        <select id="filterCategory" class="filter-select">
                            <option value="">すべてのカテゴリー</option>
                        </select>
                    </div>

                    <div class="foods-table-container">
                        <table class="foods-table">
                            <thead>
                                <tr>
                                    <th>画像</th>
                                    <th>食材名</th>
                                    <th>カテゴリー</th>
                                    <th>タンパク質</th>
                                    <th>評価</th>
                                    <th>価格帯</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="foodsTableBody">
                                <!-- 動的に挿入されます -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- カテゴリー管理タブ -->
                <section id="tab-categories" class="admin-tab">
                    <div class="tab-header">
                        <h2>カテゴリー管理</h2>
                        <button class="btn-primary" onclick="showAddCategoryModal()">
                            新しいカテゴリーを追加
                        </button>
                    </div>

                    <div class="categories-grid" id="categoriesGrid">
                        <!-- 動的に挿入されます -->
                    </div>
                </section>

                <!-- レストラン管理タブ -->
                <section id="tab-restaurants" class="admin-tab">
                    <div class="tab-header">
                        <h2>レストラン管理</h2>
                        <button class="btn-primary" onclick="showAddRestaurantModal()">
                            新しいレストランを追加
                        </button>
                    </div>

                    <div class="admin-filters">
                        <input type="text" id="searchRestaurants" placeholder="レストラン名で検索..." class="search-input">
                        <select id="filterRestaurantCategory" class="filter-select">
                            <option value="">すべてのカテゴリー</option>
                            <option value="サラダ専門店">サラダ専門店</option>
                            <option value="サンドイッチチェーン">サンドイッチチェーン</option>
                            <option value="牛丼チェーン">牛丼チェーン</option>
                            <option value="ハンバーガーチェーン">ハンバーガーチェーン</option>
                            <option value="カフェチェーン">カフェチェーン</option>
                        </select>
                    </div>

                    <div class="restaurants-grid" id="restaurantsGrid">
                        <!-- 動的に挿入されます -->
                    </div>
                </section>

                <!-- メニュー管理タブ -->
                <section id="tab-menus" class="admin-tab">
                    <div class="tab-header">
                        <h2>メニュー管理</h2>
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn-primary" onclick="showAddMenuModal()">
                                新しいメニューを追加
                            </button>
                            <button class="btn-secondary" onclick="importYoshinoyaMenus()" style="background: #ff6b35; color: white;">
                                🚀 吉野家メニュー一括インポート
                            </button>
                        </div>
                    </div>

                    <div class="admin-filters">
                        <input type="text" id="searchMenus" placeholder="メニュー名で検索..." class="search-input">
                        <select id="filterMenuRestaurant" class="filter-select">
                            <option value="">すべてのレストラン</option>
                        </select>
                        <select id="filterMenuCategory" class="filter-select">
                            <option value="">すべてのカテゴリー</option>
                            <option value="サラダ">サラダ</option>
                            <option value="サンドイッチ">サンドイッチ</option>
                            <option value="丼">丼</option>
                            <option value="ハンバーガー">ハンバーガー</option>
                            <option value="軽食">軽食</option>
                            <option value="ボウル">ボウル</option>
                        </select>
                    </div>

                    <div class="menus-table-container">
                        <table class="menus-table">
                            <thead>
                                <tr>
                                    <th>画像</th>
                                    <th>レストラン</th>
                                    <th>メニュー名</th>
                                    <th>カテゴリー</th>
                                    <th>価格</th>
                                    <th>カロリー</th>
                                    <th>タンパク質</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="menusTableBody">
                                <!-- 動的に挿入されます -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- インポート/エクスポートタブ -->
                <section id="tab-import-export" class="admin-tab">
                    <div class="tab-header">
                        <h2>インポート/エクスポート</h2>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                        <div style="background: rgba(255, 255, 255, 0.8); padding: 2rem; border-radius: 1rem;">
                            <h3>エクスポート</h3>
                            <p>現在の食材データをJSONファイルでダウンロードできます。</p>
                            <button class="btn-secondary" onclick="exportData()">
                                データをエクスポート
                            </button>
                        </div>

                        <div style="background: rgba(255, 255, 255, 0.8); padding: 2rem; border-radius: 1rem;">
                            <h3>インポート</h3>
                            <p>JSONファイルから食材データを一括インポートできます。</p>
                            <input type="file" id="importFile" accept=".json" style="display: none;">
                            <button class="btn-secondary" onclick="document.getElementById('importFile').click()">
                                データをインポート
                            </button>
                        </div>
                    </div>
                </section>

                <!-- 設定タブ -->
                <section id="tab-settings" class="admin-tab">
                    <div class="tab-header">
                        <h2>設定</h2>
                    </div>

                    <!-- 自動更新システム -->
                    <div style="background: rgba(255, 255, 255, 0.8); padding: 2rem; border-radius: 1rem; margin-bottom: 2rem;">
                        <h3>自動更新システム</h3>
                        <p>チェーン店の新メニューと実際の写真を自動で取得・更新します</p>

                        <div class="update-status">
                            <div class="status-indicator" id="updateStatusIndicator"></div>
                            <span id="updateStatusText">システム停止中</span>
                            <button class="btn-primary" id="toggleAutoUpdate" onclick="toggleAutoUpdate()">
                                自動更新を開始
                            </button>
                        </div>

                        <div class="update-controls">
                            <button class="btn-secondary" onclick="manualUpdate()">手動更新を実行</button>
                            <button class="btn-secondary" onclick="testConnection()">接続テスト</button>
                            <button class="btn-secondary" onclick="clearUpdateLog()">ログクリア</button>
                        </div>

                        <div class="sync-status">
                            <div class="sync-item">
                                <h5>最終更新</h5>
                                <div class="sync-date" id="lastUpdateTime">未実行</div>
                            </div>
                            <div class="sync-item">
                                <h5>新規メニュー</h5>
                                <div class="sync-count" id="newMenusCount">0</div>
                            </div>
                            <div class="sync-item">
                                <h5>更新済み画像</h5>
                                <div class="sync-count" id="updatedImagesCount">0</div>
                            </div>
                            <div class="sync-item">
                                <h5>エラー数</h5>
                                <div class="sync-count" id="errorCount">0</div>
                            </div>
                        </div>

                        <div class="update-log" id="updateLog">
                            <div class="log-entry">システム準備完了 - 自動更新を開始してください</div>
                        </div>
                    </div>

                    <!-- API設定 -->
                    <div class="auto-update-section">
                        <h3>🔗 API設定</h3>
                        <p>各チェーン店のデータ取得設定</p>

                        <div class="api-settings">
                            <div class="api-setting-item">
                                <h4>🥗 Crispy Salad</h4>
                                <label>API エンドポイント:</label>
                                <input type="url" id="crispyApiUrl" placeholder="https://api.crispy-salad.com/menu" value="https://api.crispy-salad.com/v1/menu">
                                <label>APIキー:</label>
                                <input type="password" id="crispyApiKey" placeholder="your-api-key">
                                <button class="api-test-btn" onclick="testAPI('crispy')">接続テスト</button>
                            </div>

                            <div class="api-setting-item">
                                <h4>🥪 サブウェイ</h4>
                                <label>スクレイピングURL:</label>
                                <input type="url" id="subwayUrl" placeholder="https://subway.co.jp/menu" value="https://subway.co.jp/menu">
                                <label>画像取得間隔（分）:</label>
                                <input type="number" id="subwayInterval" value="60" min="30">
                                <button class="api-test-btn" onclick="testAPI('subway')">接続テスト</button>
                            </div>

                            <div class="api-setting-item">
                                <h4>🍱 吉野家</h4>
                                <label>RSS フィード:</label>
                                <input type="url" id="yoshinoyaRss" placeholder="https://yoshinoya.com/rss" value="https://yoshinoya.com/menu/rss">
                                <label>栄養情報API:</label>
                                <input type="url" id="yoshinoyaNutrition" placeholder="https://yoshinoya.com/api/nutrition">
                                <button class="api-test-btn" onclick="testAPI('yoshinoya')">接続テスト</button>
                            </div>

                            <div class="api-setting-item">
                                <h4>🍔 モスバーガー</h4>
                                <label>公式API:</label>
                                <input type="url" id="mosApi" placeholder="https://mos.jp/api/menu" value="https://mos.jp/api/v2/menu">
                                <label>認証トークン:</label>
                                <input type="password" id="mosToken" placeholder="bearer-token">
                                <button class="api-test-btn" onclick="testAPI('mos')">接続テスト</button>
                            </div>

                            <div class="api-setting-item">
                                <h4>☕ スターバックス</h4>
                                <label>メニューAPI:</label>
                                <input type="url" id="starbucksApi" placeholder="https://starbucks.co.jp/api/menu" value="https://app.starbucks.co.jp/api/v1/menu">
                                <label>地域設定:</label>
                                <select id="starbucksRegion">
                                    <option value="jp">日本</option>
                                    <option value="us">アメリカ</option>
                                </select>
                                <button class="api-test-btn" onclick="testAPI('starbucks')">接続テスト</button>
                            </div>

                            <div class="api-setting-item">
                                <h4>🖼️ 画像取得設定</h4>
                                <label>Unsplash API キー:</label>
                                <input type="password" id="unsplashKey" placeholder="unsplash-access-key">
                                <label>Google Images API:</label>
                                <input type="password" id="googleImagesKey" placeholder="google-api-key">
                                <button class="api-test-btn" onclick="testAPI('images')">接続テスト</button>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn-primary" onclick="saveAPISettings()">API設定を保存</button>
                            <button class="btn-secondary" onclick="resetAPISettings()">デフォルトに戻す</button>
                        </div>
                    </div>

                    <!-- データインポート -->
                    <div style="background: rgba(255, 255, 255, 0.8); padding: 2rem; border-radius: 1rem; margin-bottom: 2rem;">
                        <h3>🍴 メニューデータ一括インポート</h3>
                        <p>チェーン店の公式メニューデータを一括で追加できます</p>

                        <div class="import-actions">
                            <button class="btn-secondary" onclick="importYoshinoyaMenus()" style="background: #ff6b35; color: white; margin-right: 1rem;">
                                🚀 吉野家メニュー一括インポート
                            </button>
                            <button class="btn-secondary" onclick="importSubwayMenus()" style="background: #00C851; color: white; margin-right: 1rem;">
                                🥪 サブウェイメニュー一括インポート
                            </button>
                            <button class="btn-secondary" onclick="importOotoyaMenus()" style="background: #8B4513; color: white; margin-right: 1rem;">
                                🍱 大戸屋メニュー一括インポート
                            </button>
                            <button class="btn-secondary" onclick="importYayoikenMenus()" style="background: #FF9800; color: white;">
                                🍛 やよい軒メニュー一括インポート
                            </button>
                        </div>
                    </div>

                    <!-- 一般設定 -->
                    <div class="settings-section">
                        <div class="setting-item">
                            <h3>🗄️ データ管理</h3>
                            <p>ローカルストレージの使用状況とデータリセット</p>
                            <div class="setting-actions">
                                <span id="storageUsage">計算中...</span>
                                <button class="btn-danger" onclick="resetAllData()">
                                    🗑️ すべてのデータをリセット
                                </button>
                            </div>
                        </div>

                        <div class="setting-item">
                            <h3>🔄 自動保存</h3>
                            <p>変更を自動的に保存する</p>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoSave" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-item">
                            <h3>⏰ 更新頻度</h3>
                            <p>自動更新の実行間隔を設定</p>
                            <select id="updateFrequency">
                                <option value="15">15分間隔</option>
                                <option value="30">30分間隔</option>
                                <option value="60" selected>1時間間隔</option>
                                <option value="180">3時間間隔</option>
                                <option value="360">6時間間隔</option>
                                <option value="720">12時間間隔</option>
                                <option value="1440">24時間間隔</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <h3>🔔 通知設定</h3>
                            <p>新メニュー発見時の通知</p>
                            <label class="toggle-switch">
                                <input type="checkbox" id="enableNotifications" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </main>

    <!-- 食材追加/編集モーダル -->
    <div id="foodModal" class="modal">
        <div class="modal-content-large">
            <div class="modal-header">
                <h3 id="foodModalTitle">新しい食材を追加</h3>
                <button class="close-btn" onclick="closeFoodModal()">&times;</button>
            </div>

            <form id="foodForm" class="food-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="foodName">食材名 *</label>
                        <input type="text" id="foodName" required>
                    </div>

                    <div class="form-group">
                        <label for="foodCategory">カテゴリー *</label>
                        <select id="foodCategory" required>
                            <option value="">カテゴリーを選択</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="foodImage">画像</label>
                        <div class="image-upload">
                            <input type="file" id="foodImage" accept="image/*">
                            <div class="image-preview" id="imagePreview">
                                <span>画像をアップロード</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="foodDescription">説明 *</label>
                        <textarea id="foodDescription" rows="3" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="proteinPer100g">タンパク質（100gあたり）*</label>
                        <input type="number" id="proteinPer100g" step="0.1" required>
                    </div>

                    <div class="form-group">
                        <label for="carbsPer100g">炭水化物（100gあたり）*</label>
                        <input type="number" id="carbsPer100g" step="0.1" required>
                    </div>

                    <div class="form-group">
                        <label for="fatPer100g">脂質（100gあたり）*</label>
                        <input type="number" id="fatPer100g" step="0.1" required>
                    </div>

                    <div class="form-group">
                        <label for="caloriesPer100g">カロリー（100gあたり）*</label>
                        <input type="number" id="caloriesPer100g" required>
                    </div>

                    <div class="form-group">
                        <label for="servingSize">1食分の目安 *</label>
                        <input type="text" id="servingSize" placeholder="例: 1切れ(80g)" required>
                    </div>

                    <div class="form-group">
                        <label for="proteinPerServing">1食分のタンパク質 *</label>
                        <input type="number" id="proteinPerServing" step="0.1" required>
                    </div>

                    <div class="form-group">
                        <label for="rating">評価</label>
                        <select id="rating">
                            <option value="5">⭐⭐⭐⭐⭐ (5)</option>
                            <option value="4" selected>⭐⭐⭐⭐ (4)</option>
                            <option value="3">⭐⭐⭐ (3)</option>
                            <option value="2">⭐⭐ (2)</option>
                            <option value="1">⭐ (1)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="priceRange">価格帯</label>
                        <select id="priceRange">
                            <option value="安価">安価</option>
                            <option value="やや高価" selected>やや高価</option>
                            <option value="高価">高価</option>
                        </select>
                    </div>
                </div>

                <div class="form-section">
                    <h4>🧪 ビタミン・ミネラル</h4>
                    <div class="nutrients-form">
                        <div class="nutrients-group">
                            <h5>ビタミン</h5>
                            <div id="vitaminsForm"></div>
                            <button type="button" class="btn-small" onclick="addNutrient('vitamins')">+ ビタミン追加</button>
                        </div>

                        <div class="nutrients-group">
                            <h5>ミネラル</h5>
                            <div id="mineralsForm"></div>
                            <button type="button" class="btn-small" onclick="addNutrient('minerals')">+ ミネラル追加</button>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h4>💪 健康効果</h4>
                    <div id="benefitsForm"></div>
                    <button type="button" class="btn-small" onclick="addBenefit()">+ 効果追加</button>
                </div>

                <div class="form-section">
                    <h4>👨‍🍳 調理のコツ</h4>
                    <div id="cookingTipsForm"></div>
                    <button type="button" class="btn-small" onclick="addCookingTip()">+ コツ追加</button>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeFoodModal()">キャンセル</button>
                    <button type="submit" class="btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>

    <!-- カテゴリー追加/編集モーダル -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="categoryModalTitle">新しいカテゴリーを追加</h3>
                <button class="close-btn" onclick="closeCategoryModal()">&times;</button>
            </div>

            <form id="categoryForm" class="category-form">
                <div class="form-group">
                    <label for="categoryName">カテゴリー名 *</label>
                    <input type="text" id="categoryName" required>
                </div>

                <div class="form-group">
                    <label for="categoryDescription">説明</label>
                    <textarea id="categoryDescription" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="categoryEmoji">絵文字</label>
                    <input type="text" id="categoryEmoji" placeholder="🥗" maxlength="2">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeCategoryModal()">キャンセル</button>
                    <button type="submit" class="btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>

    <!-- レストラン追加/編集モーダル -->
    <div id="restaurantModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="restaurantModalTitle">新しいレストランを追加</h3>
                <button class="close-btn" onclick="closeRestaurantModal()">&times;</button>
            </div>

            <form id="restaurantForm" class="restaurant-form">
                <div class="form-group">
                    <label for="restaurantName">レストラン名 *</label>
                    <input type="text" id="restaurantName" required>
                </div>

                <div class="form-group">
                    <label for="restaurantCategory">カテゴリー *</label>
                    <select id="restaurantCategory" required>
                        <option value="">カテゴリーを選択</option>
                        <option value="サラダ専門店">サラダ専門店</option>
                        <option value="サンドイッチチェーン">サンドイッチチェーン</option>
                        <option value="牛丼チェーン">牛丼チェーン</option>
                        <option value="ハンバーガーチェーン">ハンバーガーチェーン</option>
                        <option value="カフェチェーン">カフェチェーン</option>
                        <option value="その他">その他</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="restaurantDescription">説明</label>
                    <textarea id="restaurantDescription" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="restaurantLogo">ロゴ画像</label>
                    <div style="display: grid; gap: 1rem;">
                        <input type="url" id="restaurantLogo" placeholder="https://example.com/logo.png">
                        <div style="text-align: center; color: #4a5568;">または</div>
                        <div class="logo-upload-section">
                            <input type="file" id="restaurantLogoFile" accept="image/*" style="display: none;">
                            <button type="button" class="btn-secondary" onclick="document.getElementById('restaurantLogoFile').click()">
                                ファイルから選択
                            </button>
                            <div class="logo-preview" id="logoPreview" style="margin-top: 1rem; text-align: center;">
                                <img id="logoPreviewImage" src="" alt="ロゴプレビュー" style="max-width: 100px; max-height: 100px; border-radius: 0.5rem; display: none;">
                                <div id="logoPreviewText" style="color: #4a5568; font-size: 0.875rem;">ロゴ画像をアップロードまたはURLを入力</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="restaurantWebsite">ウェブサイト</label>
                    <input type="url" id="restaurantWebsite" placeholder="https://example.com">
                </div>

                <div class="form-group">
                    <label for="restaurantEstablished">設立年</label>
                    <input type="number" id="restaurantEstablished" min="1800" max="2025">
                </div>

                <div class="form-group">
                    <label for="restaurantLocations">展開地域</label>
                    <input type="text" id="restaurantLocations" placeholder="例: 東京,大阪,全国">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeRestaurantModal()">キャンセル</button>
                    <button type="submit" class="btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>

    <!-- メニュー追加/編集モーダル -->
    <div id="menuModal" class="modal">
        <div class="modal-content-large">
            <div class="modal-header">
                <h3 id="menuModalTitle">新しいメニューを追加</h3>
                <button class="close-btn" onclick="closeMenuModal()">&times;</button>
            </div>

            <form id="menuForm" class="menu-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="menuName">メニュー名</label>
                        <input type="text" id="menuName">
                    </div>

                    <div class="form-group">
                        <label for="menuRestaurant">レストラン</label>
                        <select id="menuRestaurant">
                            <option value="">レストランを選択</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="menuCategory">カテゴリー</label>
                        <select id="menuCategory">
                            <option value="">カテゴリーを選択</option>
                            <option value="サラダ">サラダ</option>
                            <option value="サンドイッチ">サンドイッチ</option>
                            <option value="丼">丼</option>
                            <option value="ハンバーガー">ハンバーガー</option>
                            <option value="軽食">軽食</option>
                            <option value="ボウル">ボウル</option>
                            <option value="その他">その他</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="menuDescription">説明</label>
                        <textarea id="menuDescription" rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="menuImage">画像URL</label>
                        <input type="url" id="menuImage" placeholder="https://example.com/menu.jpg">
                    </div>

                    <div class="form-group">
                        <label for="menuImageFile">または画像ファイルを選択</label>
                        <input type="file" id="menuImageFile" accept="image/*">
                        <div id="menuImagePreview" class="image-preview" style="display: none; margin-top: 0.5rem;">
                            <img id="menuImagePreviewImg" style="max-width: 150px; max-height: 150px; border-radius: 8px; object-fit: cover;">
                            <p id="menuImagePreviewText" style="color: #666; font-size: 0.9rem; margin: 0.5rem 0 0 0;">プレビュー</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="menuPrice">価格（円）</label>
                        <input type="number" id="menuPrice" min="0">
                    </div>

                    <div class="form-group">
                        <label for="menuSize">サイズ・容量</label>
                        <input type="text" id="menuSize" placeholder="例: レギュラー、15cm、並盛">
                    </div>
                </div>

                <div class="form-section">
                    <h4>🧪 栄養成分（1食分）</h4>
                    <div class="nutrition-form-grid">
                        <div class="form-group">
                            <label for="menuCalories">カロリー（kcal）*</label>
                            <input type="number" id="menuCalories" min="0" step="1" required>
                        </div>

                        <div class="form-group">
                            <label for="menuProtein">タンパク質（g）*</label>
                            <input type="number" id="menuProtein" min="0" step="0.1" required>
                        </div>

                        <div class="form-group">
                            <label for="menuCarbs">炭水化物（g）*</label>
                            <input type="number" id="menuCarbs" min="0" step="0.1" required>
                        </div>

                        <div class="form-group">
                            <label for="menuFat">脂質（g）*</label>
                            <input type="number" id="menuFat" min="0" step="0.1" required>
                        </div>

                        <div class="form-group">
                            <label for="menuFiber">食物繊維（g）</label>
                            <input type="number" id="menuFiber" min="0" step="0.1">
                        </div>

                        <div class="form-group">
                            <label for="menuSodium">塩分（mg）</label>
                            <input type="number" id="menuSodium" min="0" step="1">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h4>🏷️ アレルギー・食事制限</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="menuAllergens">アレルギー物質</label>
                            <input type="text" id="menuAllergens" placeholder="例: 卵,乳,小麦（カンマ区切り）">
                        </div>

                        <div class="form-group dietary-checkboxes">
                            <label>
                                <input type="checkbox" id="menuVegetarian"> ベジタリアン対応
                            </label>
                            <label>
                                <input type="checkbox" id="menuVegan"> ヴィーガン対応
                            </label>
                            <label>
                                <input type="checkbox" id="menuGlutenFree"> グルテンフリー
                            </label>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="menuAvailable" checked> 販売中
                            </label>
                            <label>
                                <input type="checkbox" id="menuSeasonal"> 季節限定
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeMenuModal()">キャンセル</button>
                    <button type="submit" class="btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/restaurant-data-embedded.js"></script>
    <script src="js/admin-simple-v2.js?v=ULTRATHINK-FIX"></script>
</body>
</html>